{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Helper to get token from thunkAPI state and build config with Authorization header\nconst getAuthConfig = thunkAPI => {\n  const token = thunkAPI.getState().auth.token;\n  return {\n    headers: token ? {\n      Authorization: `Bearer ${token}`\n    } : {}\n  };\n};\n\n// Fetch tasks thunk\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\nexport const fetchTasks = createAsyncThunk('tasks/fetchTasks', async (_, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    const response = await axios.get(`${API_URL}/api/tasks`, config);\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    return thunkAPI.rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || 'Failed to fetch tasks');\n  }\n});\n\n// Add task thunk\nexport const addTaskAsync = createAsyncThunk('tasks/addTaskAsync', async (taskData, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    const response = await axios.post('/api/tasks', taskData, config);\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    return thunkAPI.rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || 'Failed to add task');\n  }\n});\n\n// Update task thunk\nexport const updateTaskAsync = createAsyncThunk('tasks/updateTaskAsync', async (taskData, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    const response = await axios.put(`/api/tasks/${taskData.id}`, taskData, config);\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    return thunkAPI.rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || 'Failed to update task');\n  }\n});\n\n// Delete task thunk\nexport const deleteTaskAsync = createAsyncThunk('tasks/deleteTaskAsync', async (taskId, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    await axios.delete(`/api/tasks/${taskId}`, config);\n    return taskId;\n  } catch (error) {\n    var _error$response4;\n    return thunkAPI.rejectWithValue(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || 'Failed to delete task');\n  }\n});\nconst taskSlice = createSlice({\n  name: 'tasks',\n  initialState: {\n    tasks: [],\n    loading: false,\n    error: null\n  },\n  reducers: {\n    // Add sync reducers here if needed\n  },\n  extraReducers: builder => {\n    builder\n    // fetch tasks\n    .addCase(fetchTasks.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchTasks.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tasks = action.payload;\n    }).addCase(fetchTasks.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // add task\n    .addCase(addTaskAsync.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(addTaskAsync.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tasks.push(action.payload);\n    }).addCase(addTaskAsync.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // update task\n    .addCase(updateTaskAsync.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(updateTaskAsync.fulfilled, (state, action) => {\n      state.loading = false;\n      const index = state.tasks.findIndex(task => task.id === action.payload.id);\n      if (index !== -1) {\n        state.tasks[index] = action.payload;\n      }\n    }).addCase(updateTaskAsync.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // delete task\n    .addCase(deleteTaskAsync.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(deleteTaskAsync.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tasks = state.tasks.filter(task => task.id !== action.payload);\n    }).addCase(deleteTaskAsync.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport default taskSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","getAuthConfig","thunkAPI","token","getState","auth","headers","Authorization","API_URL","process","env","REACT_APP_API_URL","fetchTasks","_","config","response","get","data","error","_error$response","rejectWithValue","addTaskAsync","taskData","post","_error$response2","updateTaskAsync","put","id","_error$response3","deleteTaskAsync","taskId","delete","_error$response4","taskSlice","name","initialState","tasks","loading","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","push","index","findIndex","task","filter","reducer"],"sources":["C:/Users/ENGINES/Desktop/ai-todo-app/client/src/redux/slices/taskSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n// Helper to get token from thunkAPI state and build config with Authorization header\r\nconst getAuthConfig = (thunkAPI) => {\r\n  const token = thunkAPI.getState().auth.token;\r\n  return {\r\n    headers: token ? { Authorization: `Bearer ${token}` } : {},\r\n  };\r\n};\r\n\r\n// Fetch tasks thunk\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\nexport const fetchTasks = createAsyncThunk('tasks/fetchTasks', async (_, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.get(`${API_URL}/api/tasks`, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to fetch tasks');\r\n  }\r\n});\r\n\r\n\r\n// Add task thunk\r\nexport const addTaskAsync = createAsyncThunk('tasks/addTaskAsync', async (taskData, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.post('/api/tasks', taskData, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to add task');\r\n  }\r\n});\r\n\r\n// Update task thunk\r\nexport const updateTaskAsync = createAsyncThunk('tasks/updateTaskAsync', async (taskData, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.put(`/api/tasks/${taskData.id}`, taskData, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to update task');\r\n  }\r\n});\r\n\r\n// Delete task thunk\r\nexport const deleteTaskAsync = createAsyncThunk('tasks/deleteTaskAsync', async (taskId, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    await axios.delete(`/api/tasks/${taskId}`, config);\r\n    return taskId;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to delete task');\r\n  }\r\n});\r\n\r\nconst taskSlice = createSlice({\r\n  name: 'tasks',\r\n  initialState: {\r\n    tasks: [],\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  reducers: {\r\n    // Add sync reducers here if needed\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // fetch tasks\r\n      .addCase(fetchTasks.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchTasks.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks = action.payload;\r\n      })\r\n      .addCase(fetchTasks.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // add task\r\n      .addCase(addTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(addTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks.push(action.payload);\r\n      })\r\n      .addCase(addTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // update task\r\n      .addCase(updateTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        const index = state.tasks.findIndex(task => task.id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.tasks[index] = action.payload;\r\n        }\r\n      })\r\n      .addCase(updateTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // delete task\r\n      .addCase(deleteTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(deleteTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks = state.tasks.filter(task => task.id !== action.payload);\r\n      })\r\n      .addCase(deleteTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport default taskSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}