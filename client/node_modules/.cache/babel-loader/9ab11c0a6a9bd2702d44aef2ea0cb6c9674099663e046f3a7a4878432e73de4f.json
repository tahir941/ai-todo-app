{"ast":null,"code":"// client/src/slices/authSlice.js\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { register, login } from '../../api/auth';\n\n// Async thunk for user registration\nexport const registerUser = createAsyncThunk('auth/registerUser', async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await register(userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n    }\n    return response.data;\n  } catch (err) {\n    var _err$response, _err$response$data, _err$response2, _err$response2$data;\n    console.error('Registration error:', err);\n    const errorMsg = ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || err.message || 'Registration failed';\n    return rejectWithValue(errorMsg);\n  }\n});\n\n// Async thunk for user login\nexport const loginUser = createAsyncThunk('auth/loginUser', async (userData, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await login(userData);\n    if (response.data.token) {\n      localStorage.setItem('token', response.data.token);\n    }\n    return response.data;\n  } catch (err) {\n    var _err$response3, _err$response3$data, _err$response4, _err$response4$data;\n    console.error('Login error:', err);\n    const errorMsg = ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || ((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || err.message || 'Login failed';\n    return rejectWithValue(errorMsg);\n  }\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState: {\n    user: null,\n    token: localStorage.getItem('token') || null,\n    status: 'idle',\n    error: null\n  },\n  reducers: {\n    logout: state => {\n      state.user = null;\n      state.token = null;\n      localStorage.removeItem('token');\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(registerUser.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(registerUser.fulfilled, (state, action) => {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.status = 'succeeded';\n      state.error = null;\n    }).addCase(registerUser.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.payload;\n    }).addCase(loginUser.pending, state => {\n      state.status = 'loading';\n      state.error = null;\n    }).addCase(loginUser.fulfilled, (state, action) => {\n      state.user = action.payload.user;\n      state.token = action.payload.token;\n      state.status = 'succeeded';\n      state.error = null;\n    }).addCase(loginUser.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  logout\n} = authSlice.actions;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","register","login","registerUser","userData","rejectWithValue","response","data","token","localStorage","setItem","err","_err$response","_err$response$data","_err$response2","_err$response2$data","console","error","errorMsg","message","loginUser","_err$response3","_err$response3$data","_err$response4","_err$response4$data","authSlice","name","initialState","user","getItem","status","reducers","logout","state","removeItem","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["C:/Users/ENGINES/Desktop/ai-todo-app/client/src/redux/slices/authSlice.js"],"sourcesContent":["// client/src/slices/authSlice.js\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { register, login } from '../../api/auth';\r\n\r\n// Async thunk for user registration\r\nexport const registerUser = createAsyncThunk(\r\n    'auth/registerUser',\r\n    async (userData, { rejectWithValue }) => {\r\n        try {\r\n            const response = await register(userData);\r\n            if (response.data.token) {\r\n                localStorage.setItem('token', response.data.token);\r\n            }\r\n            return response.data;\r\n        } catch (err) {\r\n            console.error('Registration error:', err);\r\n            const errorMsg =\r\n                err.response?.data?.error || err.response?.data?.message || err.message || 'Registration failed';\r\n            return rejectWithValue(errorMsg);\r\n        }\r\n    }\r\n);\r\n\r\n// Async thunk for user login\r\nexport const loginUser = createAsyncThunk(\r\n    'auth/loginUser',\r\n    async (userData, { rejectWithValue }) => {\r\n        try {\r\n            const response = await login(userData);\r\n            if (response.data.token) {\r\n                localStorage.setItem('token', response.data.token);\r\n            }\r\n            return response.data;\r\n        } catch (err) {\r\n            console.error('Login error:', err);\r\n            const errorMsg =\r\n                err.response?.data?.error || err.response?.data?.message || err.message || 'Login failed';\r\n            return rejectWithValue(errorMsg);\r\n        }\r\n    }\r\n);\r\n\r\nconst authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState: {\r\n        user: null,\r\n        token: localStorage.getItem('token') || null,\r\n        status: 'idle',\r\n        error: null,\r\n    },\r\n    reducers: {\r\n        logout: (state) => {\r\n            state.user = null;\r\n            state.token = null;\r\n            localStorage.removeItem('token');\r\n        },\r\n    },\r\n    extraReducers: (builder) => {\r\n        builder\r\n            .addCase(registerUser.pending, (state) => {\r\n                state.status = 'loading';\r\n                state.error = null;\r\n            })\r\n            .addCase(registerUser.fulfilled, (state, action) => {\r\n                state.user = action.payload.user;\r\n                state.token = action.payload.token;\r\n                state.status = 'succeeded';\r\n                state.error = null;\r\n            })\r\n            .addCase(registerUser.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.error = action.payload;\r\n            })\r\n            .addCase(loginUser.pending, (state) => {\r\n                state.status = 'loading';\r\n                state.error = null;\r\n            })\r\n            .addCase(loginUser.fulfilled, (state, action) => {\r\n                state.user = action.payload.user;\r\n                state.token = action.payload.token;\r\n                state.status = 'succeeded';\r\n                state.error = null;\r\n            })\r\n            .addCase(loginUser.rejected, (state, action) => {\r\n                state.status = 'failed';\r\n                state.error = action.payload;\r\n            });\r\n    },\r\n});\r\n\r\nexport const { logout } = authSlice.actions;\r\nexport default authSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}