{"ast":null,"code":"// src/redux/slices/taskSlice.js\nimport{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import axios from'axios';// Helper to get token from thunkAPI state and build config with Authorization header\nconst getAuthConfig=thunkAPI=>{const token=thunkAPI.getState().auth.token;return{headers:{Authorization:token?\"Bearer \".concat(token):''}};};// Fetch tasks thunk\nexport const fetchTasks=createAsyncThunk('tasks/fetchTasks',async(_,thunkAPI)=>{try{const config=getAuthConfig(thunkAPI);const response=await axios.get('/api/tasks',config);return response.data;}catch(error){var _error$response;// Use optional chaining to avoid crashes if error.response is undefined\nreturn thunkAPI.rejectWithValue(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||'Failed to fetch tasks');}});// Add task thunk\nexport const addTaskAsync=createAsyncThunk('tasks/addTaskAsync',async(taskData,thunkAPI)=>{try{const config=getAuthConfig(thunkAPI);const response=await axios.post('/api/tasks',taskData,config);return response.data;}catch(error){var _error$response2;return thunkAPI.rejectWithValue(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||'Failed to add task');}});// Update task thunk\nexport const updateTaskAsync=createAsyncThunk('tasks/updateTaskAsync',async(taskData,thunkAPI)=>{try{const config=getAuthConfig(thunkAPI);const response=await axios.put(\"/api/tasks/\".concat(taskData.id),taskData,config);return response.data;}catch(error){var _error$response3;return thunkAPI.rejectWithValue(((_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data)||'Failed to update task');}});// Delete task thunk\nexport const deleteTaskAsync=createAsyncThunk('tasks/deleteTaskAsync',async(taskId,thunkAPI)=>{try{const config=getAuthConfig(thunkAPI);await axios.delete(\"/api/tasks/\".concat(taskId),config);return taskId;}catch(error){var _error$response4;return thunkAPI.rejectWithValue(((_error$response4=error.response)===null||_error$response4===void 0?void 0:_error$response4.data)||'Failed to delete task');}});const taskSlice=createSlice({name:'tasks',initialState:{tasks:[],loading:false,error:null},reducers:{// Optional sync reducers (if needed)\n},extraReducers:builder=>{builder// fetch tasks\n.addCase(fetchTasks.pending,state=>{state.loading=true;state.error=null;}).addCase(fetchTasks.fulfilled,(state,action)=>{state.loading=false;state.tasks=action.payload;}).addCase(fetchTasks.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// add task\n.addCase(addTaskAsync.pending,state=>{state.loading=true;state.error=null;}).addCase(addTaskAsync.fulfilled,(state,action)=>{state.loading=false;state.tasks.push(action.payload);}).addCase(addTaskAsync.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// update task\n.addCase(updateTaskAsync.pending,state=>{state.loading=true;state.error=null;}).addCase(updateTaskAsync.fulfilled,(state,action)=>{state.loading=false;const index=state.tasks.findIndex(task=>task.id===action.payload.id);if(index!==-1){state.tasks[index]=action.payload;}}).addCase(updateTaskAsync.rejected,(state,action)=>{state.loading=false;state.error=action.payload;})// delete task\n.addCase(deleteTaskAsync.pending,state=>{state.loading=true;state.error=null;}).addCase(deleteTaskAsync.fulfilled,(state,action)=>{state.loading=false;state.tasks=state.tasks.filter(task=>task.id!==action.payload);}).addCase(deleteTaskAsync.rejected,(state,action)=>{state.loading=false;state.error=action.payload;});}});export default taskSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","getAuthConfig","thunkAPI","token","getState","auth","headers","Authorization","concat","fetchTasks","_","config","response","get","data","error","_error$response","rejectWithValue","addTaskAsync","taskData","post","_error$response2","updateTaskAsync","put","id","_error$response3","deleteTaskAsync","taskId","delete","_error$response4","taskSlice","name","initialState","tasks","loading","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","push","index","findIndex","task","filter","reducer"],"sources":["C:/Users/ENGINES/Desktop/ai-todo-app/client/src/redux/slices/taskSlice.js"],"sourcesContent":["// src/redux/slices/taskSlice.js\r\nimport { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n// Helper to get token from thunkAPI state and build config with Authorization header\r\nconst getAuthConfig = (thunkAPI) => {\r\n  const token = thunkAPI.getState().auth.token;\r\n  return {\r\n    headers: {\r\n      Authorization: token ? `Bearer ${token}` : '',\r\n    },\r\n  };\r\n};\r\n\r\n// Fetch tasks thunk\r\nexport const fetchTasks = createAsyncThunk('tasks/fetchTasks', async (_, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.get('/api/tasks', config);\r\n    return response.data;\r\n  } catch (error) {\r\n    // Use optional chaining to avoid crashes if error.response is undefined\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to fetch tasks');\r\n  }\r\n});\r\n\r\n// Add task thunk\r\nexport const addTaskAsync = createAsyncThunk('tasks/addTaskAsync', async (taskData, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.post('/api/tasks', taskData, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to add task');\r\n  }\r\n});\r\n\r\n// Update task thunk\r\nexport const updateTaskAsync = createAsyncThunk('tasks/updateTaskAsync', async (taskData, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.put(`/api/tasks/${taskData.id}`, taskData, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to update task');\r\n  }\r\n});\r\n\r\n// Delete task thunk\r\nexport const deleteTaskAsync = createAsyncThunk('tasks/deleteTaskAsync', async (taskId, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    await axios.delete(`/api/tasks/${taskId}`, config);\r\n    return taskId;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to delete task');\r\n  }\r\n});\r\n\r\nconst taskSlice = createSlice({\r\n  name: 'tasks',\r\n  initialState: {\r\n    tasks: [],\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  reducers: {\r\n    // Optional sync reducers (if needed)\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // fetch tasks\r\n      .addCase(fetchTasks.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchTasks.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks = action.payload;\r\n      })\r\n      .addCase(fetchTasks.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // add task\r\n      .addCase(addTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(addTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks.push(action.payload);\r\n      })\r\n      .addCase(addTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // update task\r\n      .addCase(updateTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        const index = state.tasks.findIndex(task => task.id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.tasks[index] = action.payload;\r\n        }\r\n      })\r\n      .addCase(updateTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // delete task\r\n      .addCase(deleteTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(deleteTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks = state.tasks.filter(task => task.id !== action.payload);\r\n      })\r\n      .addCase(deleteTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport default taskSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}