{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\n\n// Helper to get token from thunkAPI state and build config with Authorization header\nconst getAuthConfig = thunkAPI => {\n  const token = thunkAPI.getState().auth.token;\n  return {\n    headers: token ? {\n      Authorization: `Bearer ${token}`\n    } : {}\n  };\n};\n\n// Base API URL\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\n\n// Fetch tasks thunk\nexport const fetchTasks = createAsyncThunk('tasks/fetchTasks', async (_, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    const response = await axios.get(`${API_URL}/api/tasks`, config);\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    return thunkAPI.rejectWithValue(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || 'Failed to fetch tasks');\n  }\n});\n\n// Add task thunk - handles full taskData\nexport const addTaskAsync = createAsyncThunk('tasks/addTaskAsync', async (taskData, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    const payload = {\n      title: taskData.title,\n      description: taskData.description || '',\n      category_id: taskData.category_id ? parseInt(taskData.category_id) : null,\n      priority: taskData.priority || '',\n      estimate: taskData.estimate || '',\n      due_date: taskData.due_date || null,\n      completed: false\n    };\n    const response = await axios.post(`${API_URL}/api/tasks`, payload, config);\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    return thunkAPI.rejectWithValue(((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || 'Failed to add task');\n  }\n});\n\n// Update task thunk - handles full taskData\nexport const updateTaskAsync = createAsyncThunk('tasks/updateTaskAsync', async (taskData, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    const payload = {\n      title: taskData.title,\n      description: taskData.description || '',\n      category_id: taskData.category_id ? parseInt(taskData.category_id) : null,\n      priority: taskData.priority || '',\n      estimate: taskData.estimate || '',\n      due_date: taskData.due_date || null,\n      completed: taskData.completed || false\n    };\n    const response = await axios.put(`${API_URL}/api/tasks/${taskData.id}`, payload, config);\n    return response.data;\n  } catch (error) {\n    var _error$response3;\n    return thunkAPI.rejectWithValue(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || 'Failed to update task');\n  }\n});\n\n// Delete task thunk\nexport const deleteTaskAsync = createAsyncThunk('tasks/deleteTaskAsync', async (taskId, thunkAPI) => {\n  try {\n    const config = getAuthConfig(thunkAPI);\n    await axios.delete(`${API_URL}/api/tasks/${taskId}`, config);\n    return taskId;\n  } catch (error) {\n    var _error$response4;\n    return thunkAPI.rejectWithValue(((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || 'Failed to delete task');\n  }\n});\nconst taskSlice = createSlice({\n  name: 'tasks',\n  initialState: {\n    tasks: [],\n    loading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // fetch tasks\n    .addCase(fetchTasks.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchTasks.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tasks = action.payload;\n    }).addCase(fetchTasks.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // add task\n    .addCase(addTaskAsync.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(addTaskAsync.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tasks.push(action.payload);\n    }).addCase(addTaskAsync.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // update task\n    .addCase(updateTaskAsync.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(updateTaskAsync.fulfilled, (state, action) => {\n      state.loading = false;\n      const index = state.tasks.findIndex(task => task.id === action.payload.id);\n      if (index !== -1) {\n        state.tasks[index] = action.payload;\n      }\n    }).addCase(updateTaskAsync.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    // delete task\n    .addCase(deleteTaskAsync.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(deleteTaskAsync.fulfilled, (state, action) => {\n      state.loading = false;\n      state.tasks = state.tasks.filter(task => task.id !== action.payload);\n    }).addCase(deleteTaskAsync.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport default taskSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","getAuthConfig","thunkAPI","token","getState","auth","headers","Authorization","API_URL","process","env","REACT_APP_API_URL","fetchTasks","_","config","response","get","data","error","_error$response","rejectWithValue","addTaskAsync","taskData","payload","title","description","category_id","parseInt","priority","estimate","due_date","completed","post","_error$response2","updateTaskAsync","put","id","_error$response3","deleteTaskAsync","taskId","delete","_error$response4","taskSlice","name","initialState","tasks","loading","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","rejected","push","index","findIndex","task","filter","reducer"],"sources":["C:/Users/ENGINES/Desktop/ai-todo-app/client/src/redux/slices/taskSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\n\r\n// Helper to get token from thunkAPI state and build config with Authorization header\r\nconst getAuthConfig = (thunkAPI) => {\r\n  const token = thunkAPI.getState().auth.token;\r\n  return {\r\n    headers: token ? { Authorization: `Bearer ${token}` } : {},\r\n  };\r\n};\r\n\r\n// Base API URL\r\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:5000';\r\n\r\n// Fetch tasks thunk\r\nexport const fetchTasks = createAsyncThunk('tasks/fetchTasks', async (_, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const response = await axios.get(`${API_URL}/api/tasks`, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to fetch tasks');\r\n  }\r\n});\r\n\r\n// Add task thunk - handles full taskData\r\nexport const addTaskAsync = createAsyncThunk('tasks/addTaskAsync', async (taskData, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const payload = {\r\n      title: taskData.title,\r\n      description: taskData.description || '',\r\n      category_id: taskData.category_id ? parseInt(taskData.category_id) : null,\r\n      priority: taskData.priority || '',\r\n      estimate: taskData.estimate || '',\r\n      due_date: taskData.due_date || null,\r\n      completed: false,\r\n    };\r\n    const response = await axios.post(`${API_URL}/api/tasks`, payload, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to add task');\r\n  }\r\n});\r\n\r\n// Update task thunk - handles full taskData\r\nexport const updateTaskAsync = createAsyncThunk('tasks/updateTaskAsync', async (taskData, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    const payload = {\r\n      title: taskData.title,\r\n      description: taskData.description || '',\r\n      category_id: taskData.category_id ? parseInt(taskData.category_id) : null,\r\n      priority: taskData.priority || '',\r\n      estimate: taskData.estimate || '',\r\n      due_date: taskData.due_date || null,\r\n      completed: taskData.completed || false,\r\n    };\r\n    const response = await axios.put(`${API_URL}/api/tasks/${taskData.id}`, payload, config);\r\n    return response.data;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to update task');\r\n  }\r\n});\r\n\r\n// Delete task thunk\r\nexport const deleteTaskAsync = createAsyncThunk('tasks/deleteTaskAsync', async (taskId, thunkAPI) => {\r\n  try {\r\n    const config = getAuthConfig(thunkAPI);\r\n    await axios.delete(`${API_URL}/api/tasks/${taskId}`, config);\r\n    return taskId;\r\n  } catch (error) {\r\n    return thunkAPI.rejectWithValue(error.response?.data || 'Failed to delete task');\r\n  }\r\n});\r\n\r\nconst taskSlice = createSlice({\r\n  name: 'tasks',\r\n  initialState: {\r\n    tasks: [],\r\n    loading: false,\r\n    error: null,\r\n  },\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // fetch tasks\r\n      .addCase(fetchTasks.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchTasks.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks = action.payload;\r\n      })\r\n      .addCase(fetchTasks.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // add task\r\n      .addCase(addTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(addTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks.push(action.payload);\r\n      })\r\n      .addCase(addTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // update task\r\n      .addCase(updateTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(updateTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        const index = state.tasks.findIndex(task => task.id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.tasks[index] = action.payload;\r\n        }\r\n      })\r\n      .addCase(updateTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      // delete task\r\n      .addCase(deleteTaskAsync.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(deleteTaskAsync.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.tasks = state.tasks.filter(task => task.id !== action.payload);\r\n      })\r\n      .addCase(deleteTaskAsync.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport default taskSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}